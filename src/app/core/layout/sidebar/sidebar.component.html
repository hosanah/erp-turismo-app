<div class="sidebar h-full flex flex-col bg-card dark:bg-gray-800 text-foreground dark:text-gray-200 shadow-lg transition-all duration-300 ease-in-out border-r border-gray-200 dark:border-gray-700" [style.width.px]="isCollapsed ? 80 : 260">
  <!-- Logo/Title Area -->
  <div class="h-16 flex items-center justify-between px-4 border-b border-gray-200 dark:border-gray-700 flex-shrink-0">
    <span class="font-bold text-xl text-primary dark:text-primary-400 whitespace-nowrap overflow-hidden transition-opacity duration-300 ease-in-out" [class.opacity-0]="isCollapsed" [class.w-0]="isCollapsed">ERP Turismo</span> 
    <button mat-icon-button 
            (click)="toggleCollapse()" 
            aria-label="Toggle sidebar collapse"
            class="text-muted-foreground dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none">
      <mat-icon>{{ isCollapsed ? 'menu_open' : 'menu' }}</mat-icon> <!-- Changed icons -->
    </button>
  </div>

  <!-- Menu Items -->
  <mat-nav-list class="flex-1 overflow-y-auto p-3 space-y-1.5">
    <ng-container *ngFor="let item of menuItems">
      <!-- Separator/Title (Consider using mat-subheader or simple div) -->
      <div *ngIf="item.separator" 
           class="px-3 pt-4 pb-1 text-xs font-semibold text-muted-foreground dark:text-gray-500 uppercase tracking-wider transition-opacity duration-300 ease-in-out" 
           [class.opacity-0]="isCollapsed" 
           [class.hidden]="isCollapsed">
        {{ item.label }}
      </div>
      <!-- Regular Menu Item -->
      <a *ngIf="!item.separator" 
         mat-list-item 
         [routerLink]="item.link" 
         routerLinkActive="bg-primary/10 dark:bg-primary-900/30 text-primary dark:text-primary-300 font-semibold" 
         [routerLinkActiveOptions]="{exact: true}"
         class="rounded-lg text-muted-foreground dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-foreground dark:hover:text-gray-100 transition-colors duration-150 ease-in-out group h-12 flex items-center" 
         [class.justify-center]="isCollapsed">
        <mat-icon matListItemIcon 
                  class="transition-all duration-300 ease-in-out group-hover:scale-110" 
                  [class.mr-3]="!isCollapsed">{{ item.icon }}</mat-icon>
        <span class="font-medium text-sm whitespace-nowrap overflow-hidden transition-opacity duration-300 ease-in-out" 
              [class.opacity-0]="isCollapsed" 
              [class.hidden]="isCollapsed">{{ item.label }}</span>
      </a>
    </ng-container>
  </mat-nav-list>

  <!-- Footer Area (Generic Info/Logout) -->
  <div class="p-4 border-t border-gray-200 dark:border-gray-700 mt-auto flex-shrink-0">
    <div class="text-xs text-muted-foreground dark:text-gray-500 mb-3 text-center transition-opacity duration-300 ease-in-out" 
         [class.opacity-0]="isCollapsed" 
         [class.hidden]="isCollapsed">
      Â© 2025 ERP Turismo
    </div>
    <button mat-stroked-button 
            color="warn" 
            (click)="logout()" 
            class="w-full flex justify-center items-center" 
            [class.px-0]="isCollapsed" 
            [class.min-w-0]="isCollapsed">
      <mat-icon [class.mr-0]="isCollapsed" [class.mr-2]="!isCollapsed">logout</mat-icon> <!-- Changed icon -->
      <span class="font-medium text-sm whitespace-nowrap overflow-hidden transition-opacity duration-300 ease-in-out" 
            [class.opacity-0]="isCollapsed" 
            [class.hidden]="isCollapsed">Sair</span>
    </button>
  </div>
</div>

